# Remember to put ;

##### UserTask (UT)
// Projection 1
connect();
// Projection 2
if isConnected() then
    channel(UT,Server).put("then");
    // Projection 3
    channel(UT,Server).put(CONNECTED,"");
    // Projection 4
    id := channel(Server,UT).get(int);
    // Projection 7
    channel(UT,CH).put(action,roomName);
    // Projection 8
    branch := channel(CH,Server).get(String);
    if branch == "then" then
        // Projection 15
        response := channel(CH,UT).put(boolean,String);
    else
        // Projection 18
        response := channel(CH,UT).put(boolean,String);
    // Projection 19
    if response[0] then
        // Projection 20
        connectToRoom(response[1]);
        // Projection 21
        connected();
    else
        // Projection 22
        notConnected();
else
    channel(UT,Server).put("else");
    // Projection 23
    notConnected();

##### Server
// Projection 2
branch := channel(UT,Server),get(String);
if branch == "then" then
    // Projection 3
    msg := channel(UT,Server).get(ServerFlag,String);
    // Projection 4
    channel(Server,UT).put(id);
    // Projection 5
    openCreationHandler(id,space,repository);
    // Projection 6
    incrementId();
    // Projection 8
    branch := channel(CH,Server).get(String);
    if branch == "then" then
        // Projection 9
        msg := channel(CH,Server).get(ServerFlag,String);
        // Projection 10
        channel(Server,CH).put(GENERATED_ROOM,createRoomName());
        // Projection 13
        msg := channel(CH,Server).get(ServerFlag,String);
        // Projection 14
        setRoom(msg[1]);
    else
        // Projection 16
        msg := channel(CH,Server).get(ServerFlag,String);
        // Projection 17
        channel(Server,CH).put(msg[1],checkRoom(msg[1]));
else
    // Projection 23 - Do nothing


##### CreationHandler (CH)
// Projection 7
msg := channel(UT,CH).get(ServerFlag,String);
// Projection 8
if msg[0] == HOST then
    channel(CH,Server).put("then");
    channel(CH,UT).put("then");
    // Projection 9
    channel(CH,Server).put(GENERATE_ROOM,"");
    // Projection 10
    msg := channel(Server,CH).get(ServerFlag,String);
    // Projection 11
    createRoom(msg[1]);
    // Projection 12
    channel(Room,CH).get(msg[1],ServerFlag);
    // Projection 13
    channel(CH,Server).put(SET_ROOM,msg[1]);
    // Projection 15
    channel(CH,UT).put(true,msg[1]);
else
    channel(CH,Server).put("else");
    channel(CH,UT).put("else");
    // Projection 16
    channel(CH,Server).put(CHECKROOM,msg[1]);
    // Projection 17
    serverResponse := channel(Server,CH).get(msg[1],boolean);
    // Projection 18
    channel(CH,UT).put(serverResponse[1],serverResponse[0]);

##### Room
// Projection 12
channel(Room,CH).put(roomName,ROOM_OK);

























































